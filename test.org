#+TITLE:Ada/SPARK support for org-mode


* Ada/SPARK : Hello World Example

#+BEGIN_SRC ada
    with Ada.Text_IO; use Ada.Text_IO;
    procedure Hello is
    begin
       Put_Line("Hello world! This is Ada/SPARK support for Emacs org-mode!");
    end Hello;
#+END_SRC

* SPARK : formally verified =Increment= function

If you have SPARK installed, try setting the =:prove= header argument of the
following block code to =t= and =gnatprove=  will verify this code.

#+BEGIN_SRC ada :version 2012 :unit main :prove t :mode all :level 4
  with Ada.Text_IO; use Ada.Text_IO;

  procedure Main with
    SPARK_Mode => On
  is
     procedure Increment (X : in out Integer) with
       Global  => null,
       Depends => (X => X),
       Pre     => (X < Integer'Last),
       Post    => (X = X'Old + 1)
     is
     begin
        X := X + 1;
     end Increment;

     My_Integer : Integer := Integer'Last - 1;
  begin
     Increment (My_Integer);
     Put_Line("Last Integer is" & My_Integer'Image);
  end Main;
#+END_SRC
